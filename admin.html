
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Post Generator (Finalized)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #e9ecef; 
            padding: 20px; 
            color: #34495e;
        }
        .container { 
            max-width: 900px; 
            margin: 0 auto 20px;
            background: white; 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
        }
        h2 { 
            text-align: center; 
            color: #2c3e50; 
            margin-bottom: 25px; 
        }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 14px; }
        input, textarea { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #ced4da; 
            border-radius: 6px; 
            font-size: 14px; 
            transition: 0.3s; 
            box-sizing: border-box; 
        }
        input:focus, textarea:focus { border-color: #28a745; outline: none; box-shadow: 0 0 5px rgba(40, 167, 69, 0.3); }
        textarea { height: 150px; resize: vertical; }
        .hidden-field { display: none; }
        
        /* ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶á ‡¶∞‡ßã-‡¶ü‡¶ø ‡¶ï‡¶≤‡¶æ‡¶Æ‡ßá ‡¶¨‡¶ø‡¶≠‡¶ï‡ßç‡¶§ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá (‡¶•‡¶æ‡¶Æ‡ßç‡¶¨‡¶®‡ßá‡¶á‡¶≤ ‡¶ì ‡¶°‡¶ø‡¶â‡¶∞‡ßá‡¶∂‡¶®) */
        .row-2-col { display: flex; gap: 15px; } 
        .col-2 { flex: 1; }
        
        /* ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶∏‡ßá‡¶ï‡¶∂‡¶®‡¶ü‡¶ø‡¶ï‡ßá ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ‡¶≠‡¶æ‡¶¨‡ßá ‡¶π‡¶æ‡¶á‡¶≤‡¶æ‡¶á‡¶ü ‡¶ï‡¶∞‡¶æ */
        .download-section-header {
            margin-top: 25px;
            margin-bottom: 10px;
            padding: 10px 0;
            border-top: 1px solid #e9ecef;
            color: #28a745; /* ‡¶∏‡¶¨‡ßÅ‡¶ú ‡¶∞‡¶ô ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
            font-weight: 700;
            font-size: 16px;
        }
        
        button {
            width: 100%; padding: 14px; background: #28a745; color: white; border: none; 
            border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 15px;
            transition: background 0.3s, transform 0.1s;
        }
        button:hover { background: #218838; }
        button:active { transform: scale(0.99); }

        .output-area { 
            max-width: 900px; 
            margin: 20px auto; 
            position: relative; 
            display: none; 
            background: #282c34; 
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        pre { 
            background: transparent; 
            color: #61dafb; 
            padding: 20px; 
            padding-top: 50px; 
            border-radius: 8px; 
            overflow-x: auto; 
            white-space: pre-wrap; 
            font-family: 'Courier New', monospace; 
            font-size: 13px;
            max-height: 400px; 
            overflow-y: auto;
        }
        .copy-btn { 
            position: absolute; top: 10px; right: 10px; width: auto; 
            padding: 6px 12px; font-size: 12px; border: 1px solid #444;
            background: #3c4046; color: #fff; font-weight: normal;
            transition: background 0.3s; margin: 0;
        }
        .copy-btn:hover { background: #50555c; }
        .copy-btn.copied { background: #1da1f2; color: white; }
    </style>
</head>
<body>

<div class="container">
    <h2><i class="fa-solid fa-file-code"></i> Filmixo Post Generator</h2>
    
    <div class="form-group">
        <label>Post Title <span style="color:red;">* (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ø‡¶ï)</span></label>
        <input type="text" id="title" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡¶ø‡¶®" required>
    </div>

    <div class="row-2-col">
        <div class="col-2 form-group">
            <label>Thumbnail URL (Image Link) <span style="color:#536471;">(‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</span></label>
            <input type="text" id="media" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡¶æ‡¶Æ‡ßç‡¶¨‡¶®‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶á‡¶Æ‡ßá‡¶ú ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶®">
        </div>
        <div class="col-2 form-group">
            <label>Video Duration (HH:MM:SS) <span style="color:#536471;">(‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</span></label>
            <input type="text" id="duration" placeholder="00:10:00">
        </div>
    </div>

    <div class="form-group">
        <label>Article Paragraphs <span style="color:#536471;">(‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï - ‡¶è‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶™‡¶≤‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ ‡¶π‡¶¨‡ßá)</span></label>
        <textarea id="paragraphs" placeholder="‡¶è‡¶á‡¶ü‡¶æ ‡ßß ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´‡•§&#10;‡¶è‡¶á‡¶ü‡¶æ ‡ß® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´‡•§"></textarea>
    </div>

    <div class="download-section-header"><i class="fa-solid fa-download"></i> ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï</div>
    
    <div class="form-group">
        <label>Final Download Link <span style="color:red;">* (‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ø‡¶ï)</span></label>
        <input type="url" id="downloadLink" placeholder="https://example.com/final-download-file.mp4" required>
    </div>
    
    <input type="hidden" id="generatedId" class="hidden-field"> 
    <div class="form-group">
        <label>Hashtags (‡¶∏‡ßç‡¶™‡ßá‡¶∏ ‡¶¶‡ßç‡¶¨‡¶æ‡¶∞‡¶æ ‡¶¨‡¶ø‡¶≠‡¶ï‡ßç‡¶§) <span style="color:#536471;">(‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</span></label>
        <input type="text" id="hashtags" value="#SecretBinodon #viralvideo #trending #virallink" placeholder="#Movie #Trending">
    </div>

    <button onclick="generateJSON()">Generate Code for posts.json</button>
</div>

<div class="output-area" id="output-box">
    <button class="copy-btn" id="copyBtn" onclick="copyCode()"><i class="fa-solid fa-copy"></i> Copy Code</button>
    <pre id="json-output"></pre>
</div>

<script>
    const usedIds = new Set();
    const ID_LENGTH = 6;
    const CHARACTERS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

    function generateUniqueId() {
        let id;
        do {
            id = '';
            for (let i = 0; i < ID_LENGTH; i++) {
                id += CHARACTERS.charAt(Math.floor(Math.random() * CHARACTERS.length));
            }
        } while (usedIds.has(id)); 
        usedIds.add(id); 
        return id;
    }

    function generateRandomDuration() {
        const randomHours = Math.floor(Math.random() * 2); // 0 or 1 hour
        const randomMinutes = Math.floor(Math.random() * 60);
        const randomSeconds = Math.floor(Math.random() * 60);

        const hh = String(randomHours).padStart(2, '0');
        const mm = String(randomMinutes).padStart(2, '0');
        const ss = String(randomSeconds).padStart(2, '0');

        return `${hh}:${mm}:${ss}`; 
    }

    function getCurrentISOString() {
        // ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶° ‡¶ü‡¶æ‡¶á‡¶Æ (BDT) ‡¶è ISO ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
        const date = new Date();
        const utc = date.getTime() + (date.getTimezoneOffset() * 60000);
        const bdtOffset = 6 * 60 * 60000; 
        const bdtDate = new Date(utc + bdtOffset);
        
        const Y = bdtDate.getFullYear();
        const M = String(bdtDate.getMonth() + 1).padStart(2, '0');
        const D = String(bdtDate.getDate()).padStart(2, '0');
        const h = String(bdtDate.getHours()).padStart(2, '0');
        const m = String(bdtDate.getMinutes()).padStart(2, '0');
        const s = String(bdtDate.getSeconds()).padStart(2, '0');

        return `${Y}-${M}-${D}T${h}:${m}:${s}Z`; // 'Z' UTC ‡¶¨‡¶æ BDT ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø ‡¶¨‡ßã‡¶ù‡¶æ‡¶§‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
    }

    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('duration').value = generateRandomDuration();
        document.getElementById('generatedId').value = generateUniqueId();
    });
    
    function generateJSON() {
        const id = document.getElementById('generatedId').value;
        const title = document.getElementById('title').value.trim();
        const downloadLink = document.getElementById('downloadLink').value.trim(); // ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶≤‡¶ø‡¶Ç‡¶ï
        
        // ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ø‡¶ï ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á
        if (!title || !downloadLink) {
             alert("‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá 'Post Title' ‡¶è‡¶¨‡¶Ç 'Final Download Link' ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ø‡¶ï‡•§");
             return;
        }
        
        // ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶ó‡ßç‡¶∞‡¶π
        const duration = document.getElementById('duration').value.trim(); 
        const media = document.getElementById('media').value.trim();
        const paraText = document.getElementById('paragraphs').value.trim();
        const hashtags = document.getElementById('hashtags').value.trim();

        const uploadTime = getCurrentISOString(); 

        const postObj = {
            id: id,
            uploadTime: uploadTime,
            title: title,
            downloadLink: downloadLink // ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
        };
        
        // üí° ‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞ ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ú‡¶ø‡¶ï (‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá JSON ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡¶¨‡ßá)
        
        // ‡ßß. Paragraphs
        if (paraText.length > 0) {
            const paragraphs = paraText.split('\n')
                                     .map(p => p.trim())
                                     .filter(p => p.length > 0);
            if (paragraphs.length > 0) {
                postObj.paragraphs = paragraphs;
            }
        }
        
        // ‡ß®. Media (Thumbnail)
        if (media.length > 0) {
            postObj.mediaImage = media;
        }

        // ‡ß©. Video Duration
        if (duration.length > 0 && duration !== '00:00:00') { // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶Æ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá‡¶ì
            postObj.videoDuration = duration;
        }

        // ‡ß™. Hashtags
        if (hashtags.length > 0) {
            postObj.hashtags = hashtags;
        }
        
        // JSON ‡¶Ü‡¶â‡¶ü‡¶™‡ßÅ‡¶ü ‡¶§‡ßà‡¶∞‡¶ø
        const jsonString = JSON.stringify(postObj, null, 2);
        
        // JSON ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶§‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∂‡ßá‡¶∑‡ßá ‡¶ï‡¶Æ‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
        const finalJsonOutput = jsonString.slice(0, -1) + "},";

        document.getElementById('json-output').innerText = finalJsonOutput;
        document.getElementById('output-box').style.display = 'block';
        
        // ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ü‡¶á‡¶°‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶°‡¶ø‡¶â‡¶∞‡ßá‡¶∂‡¶® ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
        document.getElementById('generatedId').value = generateUniqueId();
        document.getElementById('duration').value = generateRandomDuration();
    }

    function copyCode() {
        const code = document.getElementById('json-output').innerText;
        const copyBtn = document.getElementById('copyBtn');
        
        navigator.clipboard.writeText(code).then(() => {
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = '<i class="fa-solid fa-check"></i> Copied!';
            copyBtn.classList.add('copied');
            
            setTimeout(() => {
                copyBtn.innerHTML = originalText;
                copyBtn.classList.remove('copied');
            }, 3000);
        }).catch(err => {
            console.error('Could not copy text: ', err);
        });
    }
</script>

</body>
</html>
