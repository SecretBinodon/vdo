<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FILMIXO Premium movie access</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- ‡¶á‡¶Æ‡ßá‡¶ú ‡¶™‡ßç‡¶∞‡¶ø-‡¶≤‡ßã‡¶° ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶æ‡ßü‡ßã‡¶∞‡¶ø‡¶ü‡¶ø ‡¶π‡¶æ‡¶á -->
    <link rel="preload" as="image" href="https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/FILMIXO-HUB.jpg" fetchpriority="high">




    
    <style>
        /* --- ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ì ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶æ‡¶ï‡¶ö‡¶æ‡¶∞ --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; text-decoration: none; }
        body { background-color: #ffffff; display: flex; justify-content: center; -webkit-tap-highlight-color: transparent; user-select: none; }
        .main-container { background-color: white; width: 100%; max-width: 600px; min-height: 10vh; border-left: 1px solid #ddd; border-right: 1px solid #ddd; position: relative; padding-bottom: 0; }

        /* --- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶π‡ßá‡¶°‡¶æ‡¶∞ --- */
        .profile-header-area { position: relative; padding: 0 15px; display: flex; justify-content: space-between; align-items: flex-start; }
        .profile-pic-container { margin-top: -75px; z-index: 2; }
        .profile-pic { width: 140px; height: 140px; border-radius: 50%; border: 4px solid white; background-color: #000; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        .profile-pic img { width: 100%; height: 100%; object-fit: cover; }
        .cover-photo::after{content:"";position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='1'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");pointer-events:none} 
        .cover-photo{width:100%;aspect-ratio:18/9;position:relative;overflow:hidden;background:radial-gradient(circle at center,#111 0%,#000 70%);contain:layout paint;transform:translateZ(0)} 
        .intro-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 6; font-size: 36px; font-weight: 900; letter-spacing: 18px; color: #fff; opacity: 0; text-shadow: 0 0 12px #fff, 0 0 28px #1da1f2; will-change: opacity, transform, filter; pointer-events: none; white-space: nowrap; }
        @keyframes cinematicIntro { 0% { opacity: 0; transform: translate(-50%, -50%) scale(.65); filter: blur(18px); } 45% { opacity: 1; filter: blur(0); transform: translate(-50%, -50%) scale(1); } 75% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); } 100% { opacity: 0; transform: translate(-50%, -50%) scale(1.4); filter: blur(12px); } } 
        .action-buttons { display: flex; gap: 8px; margin-top: 10px; }
        .btn { border: none; padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: bold; color: white; cursor: pointer; display: flex; align-items: center; gap: 5px; transition: transform 0.1s; -webkit-tap-highlight-color: transparent; user-select: none; }
        .btn:active { transform: scale(0.95); }
        .btn-email { background-color: #1da1f2; }
        .btn-share { background-color: #000; }

        /* --- ‡¶á‡¶®‡¶´‡ßã ‡¶∏‡ßá‡¶ï‡¶∂‡¶® (‡¶Ü‡¶™‡¶ó‡ßç‡¶∞‡ßá‡¶°‡ßá‡¶°: ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü ‡¶∂‡¶ø‡¶´‡¶ü ‡¶´‡¶ø‡¶ï‡ßç‡¶∏) --- */
        .info-section { padding: 5px 15px 15px 15px; display: flex; flex-direction: column; }
        .website-name { font-size: 22px; font-weight: 800; color: #1c1e21; text-transform: uppercase; display: inline-flex; align-items: center; gap: 8px; margin-bottom: 3px; }
        .username { font-size: 15px; color: #1da1f2; margin-bottom: 12px; cursor: default; -webkit-tap-highlight-color: transparent; }
        
        /* üî• ‡¶´‡¶ø‡¶ï‡ßç‡¶∏: ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú ‡¶õ‡ßã‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá (13.5px) ‡¶è‡¶¨‡¶Ç min-width ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶ù‡¶æ‡¶Å‡¶ï‡ßÅ‡¶®‡¶ø ‡¶®‡¶æ ‡¶π‡ßü */
        .stats { display: flex; gap: 2px; font-size: 13.5px; color: #333333; margin-bottom: 8px; font-weight: 500; align-items: center; }
        .stats b { color: #1c1e21; font-weight: 800; margin-right: 2px; display: inline-block; min-width: 15px; text-align: center; } 
        
        /* üî• ‡¶´‡¶ø‡¶ï‡ßç‡¶∏: ‡¶Æ‡ßá‡¶ü‡¶æ ‡¶á‡¶®‡¶´‡ßã ‡¶´‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶á‡¶ú ‡¶õ‡ßã‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá */
        .meta-info { display: flex; flex-wrap: wrap; gap: 15px; font-size: 13.5px; color: #536471; margin-bottom: 10px; }
        .meta-info span { display: flex; align-items: center; gap: 5px; }
        .meta-info i { font-size: 14px; color: #536471; }
        
        /* ‡¶¨‡¶æ‡ßü‡ßÅ ‡¶´‡¶®‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶ú‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü */
        .bio { font-size: 16px; color: #0f1419; line-height: 1.2; word-spacing: normal; text-align: left; margin-bottom: 0; font-weight: 400; }

        /* --- ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶∞ --- */
        .nav-bar { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; border-top: 2px solid #e1e8ed; border-bottom: 2px solid #e1e8ed; margin-bottom: 0px; background: #fff; position: sticky; top: 0; z-index: 100; }
        .nav-btn { flex: 1; min-width: 0; text-align: center; justify-content: center; padding: 8px 5px; margin: 0 4px; border-radius: 20px; font-size: 14px; font-weight: bold; cursor: pointer; border: 1px solid #e1e8ed; display: flex; align-items: center; gap: 4px; transition: background-color 0.1s ease; white-space: nowrap; -webkit-tap-highlight-color: transparent; user-select: none; }
        .nav-bar .nav-btn:first-child { margin-left: 0; } 
        .nav-bar .nav-btn:last-child { margin-right: 0; } 
        #nav-search { background-color: #f0f2f5; color: #000; border: 1px solid #e1e8ed; }
        .nav-btn.active { background-color: #000 !important; color: white !important; border: 1px solid #000 !important; }
        .nav-btn.inactive { background-color: #f0f2f5; color: #000; }
        .nav-btn:hover { background-color: #e4e6eb; }

        /* --- ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® --- */
        #feed-container { min-height: 200px; }
        .post-card { padding: 5px 15px 5px 15px; border-bottom: 1.5px solid #e1e8ed; display: flex; flex-direction: column; gap: 6px; background: white; opacity: 0; animation: fadeIn 0.5s forwards; }
        @keyframes fadeIn { to { opacity: 1; } }
        .post-header { display: flex; gap: 10px; align-items: center; }
        .post-pfp { width: 45px; height: 45px; border-radius: 50%; overflow: hidden; background-color: #ddd; }
        .post-pfp img { width: 100%; height: 100%; object-fit: cover; }
        .post-meta-text { display: flex; flex-direction: column; justify-content: center; }
        .name-row { display: flex; align-items: center; gap: 5px; flex-wrap: wrap; }
        .name-row h3 { font-size: 18px; font-weight: 800; color: #0f1419; margin: 0; display: inline-flex; align-items: center; gap: 5px; }
        .post-username { font-size: 14px; color: #1da1f2; cursor: default; -webkit-tap-highlight-color: transparent; }
        .verified-badge { color: #1da1f2; font-size: 15px; margin-left: -2px; }
        .time-ago { font-size: 15px; color: #536471; }
        .dot-separator { font-size: 15px; color: #536471; margin: 0 2px; }
        .post-title, .post-excerpt { cursor: pointer; -webkit-tap-highlight-color: transparent; user-select: none; transition: color 0.1s ease; }
        .post-title { font-size: 18px; font-weight: 700; color: #0f1419; margin-bottom: 4px; margin-top: -3px; line-height: 1.3; }
        .post-title:active { color: #1da1f2; }
        .post-excerpt { font-size: 15px; color: #0f1419; line-height: 1.4; margin-bottom: 0px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .post-excerpt:active { color: #1da1f2; }
        .read-more-text { color: #1da1f2; font-weight: 600; font-size: 14px; }
        .hashtags { color: #1d9bf0; font-size: 15px; margin-bottom: 1px; cursor: default; }
        
        /* --- ‡¶Æ‡¶ø‡¶°‡¶ø‡ßü‡¶æ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ --- */
        .media-container { position: relative; width: 100%; border-radius: 12px; overflow: hidden; margin-top: 1px; margin-bottom: 1px; display: block; cursor: pointer; background: #000; aspect-ratio: 3 / 4; max-height: 720px; -webkit-tap-highlight-color: transparent; }
        .media-container img { width: 100%; height: 100%; display: block; object-fit: cover; margin: 0 auto; max-height: none; transition: transform 0.1s ease; transform: scale(1.0); }
        .media-container:active img { transform: scale(1.02); }
        .media-container.auto-fit { aspect-ratio: initial; height: auto; }
        .media-container.auto-fit img { height: auto; object-fit: contain; }
        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background-color: rgba(0, 0, 0, 0.6); border-radius: 50%; display: flex; justify-content: center; align-items: center; pointer-events: none; border: 2px solid rgba(255,255,255,0.8); z-index: 5; }
        .play-icon::after { content: ''; display: block; width: 0; height: 0; border-left: 18px solid white; border-top: 11px solid transparent; border-bottom: 11px solid transparent; margin-left: 4px; }
        .duration-badge { position: absolute; bottom: 8px; right: 8px; background-color: rgba(0, 0, 0, 0.8); color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; pointer-events: none; z-index: 5; }
        
        /* --- ‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® --- */
        .post-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; color: #536471; font-size: 16px; font-weight: 500; }
        .footer-left { display: flex; align-items: center; gap: 6px; }
        .footer-right { display: flex; align-items: center; gap: 20px; }
        .love-btn { cursor: pointer; display: flex; align-items: center; gap: 5px; transition: all 0.2s; user-select: none; font-weight: 500; -webkit-tap-highlight-color: transparent; }
        .love-btn i { font-size: 18px; }
        .love-btn:hover { color: #e0245e; background-color: rgba(224, 36, 94, 0.1); padding: 4px 8px; border-radius: 15px; margin: -4px -8px; }
        .love-btn.liked { color: #e0245e; } .love-btn.liked i { font-weight: 900; }
        .count-text, .label-text { font-weight: 500; font-size: 15px; }
        .footer-left i { font-size: 16px; }
        .post-date-display { font-size: 14px; color: #65676b; font-weight: 500; }
        .footer-share-btn i { font-size: 16px; color: #536471; transition: color 0.1s ease; }
        .footer-share-btn:active i { color: #1da1f2; }
        .footer-share-btn { cursor: pointer; padding: 8px; border-radius: 50%; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; -webkit-tap-highlight-color: transparent; user-select: none; }
        .footer-share-btn:hover { background-color: rgba(0,0,0,0.05); }

        /* --- ‡¶≤‡ßã‡¶°‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø --- */
        .wave-loader { display: flex; justify-content: center; align-items: center; height: 100%; gap: 5px; }
        .wave-loader div { width: 10px; height: 10px; background-color: #1da1f2; border-radius: 50%; animation: bounce 1.2s infinite ease-in-out both; transform: scale(0); }
        .wave-loader div:nth-child(1) { animation-delay: -0.32s; }
        .wave-loader div:nth-child(2) { animation-delay: -0.16s; }
        .wave-loader div:nth-child(3) { animation-delay: 0s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        #sentinel { width: 100%; height: 50px; display: flex; align-items: center; justify-content: center; }
        #sentinel .wave-loader { display: none; } 
        #sentinel.loading .wave-loader { display: flex; } 

        /* --- ‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞, ‡¶≤‡¶ó‡¶á‡¶®, ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® --- */
        .site-footer { background-color: #fff; padding: 20px 20px; text-align: center; border-top: none; margin-top: 0; }
        .footer-links { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 15px; }
        .footer-links a { color: #536471; font-size: 14px; font-weight: 500; transition: color 0.2s; -webkit-tap-highlight-color: transparent; user-select: none; }
        .footer-links a:hover { color: #1da1f2; text-decoration: underline; }
        .footer-copyright { color: #536471; font-size: 13px; }
        .footer-copyright a { color: #1da1f2; font-weight: bold; }
        #login-view { display: none; padding: 40px 20px; text-align: center; }
        .login-box { background: white; padding: 30px; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-width: 400px; margin: 0 auto; }
        .login-title { margin-bottom: 20px; }
        .login-submit-btn { width: 100%; padding: 12px; background-color: #000; color: white; border: none; border-radius: 25px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; -webkit-tap-highlight-color: transparent; user-select: none; }
        .success-msg { color: green; font-weight: bold; margin-top: 15px; display: none; }
        .notification { position: fixed; top: 70px; left: 50%; transform: translateX(-50%); background-color: rgba(0, 0, 0, 0.85); color: white; padding: 10px 20px; border-radius: 30px; z-index: 1002; opacity: 0; transition: opacity 0.3s; font-size: 14px; pointer-events: none; }
        .notification.show { opacity: 1; }

        /* --- ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá --- */
        #search-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: white; z-index: 1001; display: none; flex-direction: column; }
        .search-header { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #e1e8ed; position: sticky; top: 0; background-color: white; z-index: 10; }
        .search-input-container { flex-grow: 1; margin: 0 10px; }
        #search-input { width: 100%; padding: 10px 15px; border: 1px solid #ddd; border-radius: 25px; font-size: 16px; outline: none; background-color: #f0f2f5; }
        .search-back-btn { background: none; border: none; font-size: 24px; color: #000; cursor: pointer; padding: 5px; -webkit-tap-highlight-color: transparent; user-select: none; }
        #search-results { padding: 0 15px; overflow-y: auto; flex-grow: 1; }
        .search-result-item { padding: 10px 0; border-bottom: 1px solid #eee; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: background-color 0.1s; -webkit-tap-highlight-color: transparent; user-select: none; }
        .search-result-item:hover { background-color: #f9f9f9; }
        .search-result-item:last-child { border-bottom: none; }
        .result-title { font-size: 16px; font-weight: 600; color: #0f1419; }
        .result-excerpt { font-size: 13px; color: #536471; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .result-img { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; }
        #not-found { text-align: center; color: #536471; margin-top: 60px; font-size: 18px; font-weight: 700; display: none; padding: 30px 20px; border-radius: 15px; background-color: #f8f9fa; border: 1px dashed #cfd9de; margin-left: 15px; margin-right: 15px; }
    </style>
</head>
<body>

    <div class="main-container">
    <div id="cover-slider" class="cover-photo">
    <div class="intro-text">FILMIXO</div>
</div>

        <div class="profile-header-area">
            <div class="profile-pic-container">
                <div class="profile-pic">
                    <img src="https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/filmixo.jpg">
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-email" onclick="sendEmail()">
                    <i class="fa-solid fa-envelope"></i> Send Email
                </button>
                <button class="btn btn-share" onclick="shareProfile()">
                    <i class="fa-solid fa-share-nodes"></i> Share
                </button>
            </div>
        </div>

        <div class="info-section">
            <h1 class="website-name">FILMIXO-HUB<i class="verified-badge fa-solid fa-circle-check"></i></h1>
            <p class="username">@filmixo</p>
            <div class="stats">
                <!-- üî• ‡¶´‡¶ø‡¶ï‡ßç‡¶∏: ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ 0 ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç CSS ‡¶¶‡¶ø‡ßü‡ßá ‡¶ú‡¶æ‡ßü‡¶ó‡¶æ ‡¶ß‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
                <span>Total Videos <b id="total-videos-count">0</b></span> ‚Ä¢ 
                <span>Total Views <b id="total-views-count">0</b></span>
            </div>
            <div class="meta-info">
                <span><i class="fa-solid fa-location-dot"></i>üá∫üá≤ United States</span>
                <span><i class="fa-regular fa-calendar"></i>Joined 13/12/2025</span>
            </div>
            <p class="bio">FILMIXO:üçø Your ultimate HD movie hub. Download exclusive releases and trending blockbusters instantly. Stop scrolling, seize the cinema.</p>
        </div>

        <div class="nav-bar">
            <div class="nav-btn active" id="nav-home" onclick="showFeed()"><i class="fa-solid fa-house"></i> Home</div>
            <div class="nav-btn inactive" id="nav-signup" onclick="goToSignUp()"><i class="fa-solid fa-user-plus"></i> Sign Up</div>
            <div class="nav-btn inactive" id="nav-login" onclick="showLogin()"><i class="fa-solid fa-arrow-right-to-bracket"></i> Login</div>
            <div class="nav-btn inactive" id="nav-search" onclick="showSearch()"><i class="fa-solid fa-magnifying-glass"></i> Search</div>
        </div>
        
        <div id="feed-container"></div>
        
        <div id="sentinel">
            <div class="wave-loader">
                <div></div><div></div><div></div>
            </div>
        </div>

        <footer class="site-footer" id="main-footer" style="display:none;">
            <div class="footer-links">
                <a href="#" id="link-about">About</a>
                <a href="#" id="link-contact">Contact</a>
                <a href="#" id="link-privacy">Privacy Policy</a>
                <a href="#" id="link-terms">Terms of Service</a>
            </div>
            <div class="footer-copyright">
                Copyright ¬© 2026 <a href="index.html">filmixo.com</a>. All rights reserved.
            </div>
        </footer>

        <div id="login-view">
            <div class="login-box">
                <h2 class="login-title">Sign up to Login FILMIXO for Premium access</h2>
                <form id="loginForm">
                    <div style="text-align:left; margin-bottom:15px;"><label>Email or number</label><input type="text" placeholder="Enter email or number" required style="width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:5px;"></div>
                    <div style="text-align:left; margin-bottom:15px;"><label>Password</label><input type="password" placeholder="Enter password" required style="width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:5px;"></div>
                    <button type="submit" class="login-submit-btn" id="loginBtn">Log in</button>
                    <div class="success-msg" id="successMsg"><i class="fa-solid fa-check-circle"></i> Check sign up details and showing premium access plz w8!</div>
                </form>
            </div>
        </div>
        
        <div id="notification" class="notification"></div>
    </div>
    
    <div id="search-overlay">
        <div class="search-header">
            <button class="search-back-btn" onclick="hideSearch()"><i class="fa-solid fa-arrow-left"></i></button>
            <div class="search-input-container"><input type="text" id="search-input" placeholder="Search movie name..." autofocus></div>
        </div>
        <div id="search-results"><div id="not-found">Post Not Found</div></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, increment, onSnapshot, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

        if ('scrollRestoration' in history) { history.scrollRestoration = 'manual'; } 

        const PERMANENT_PROFILE_IMAGE_URL = "https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/filmixo.jpg";
        const firebaseConfig = { apiKey: "AIzaSyCAsD8wucLsudzY5oNbiixLGyjN2apdV0Q", authDomain: "my-ad-analytics-4560a.firebaseapp.com", databaseURL: "https://my-ad-analytics-4560a-default-rtdb.firebaseio.com", projectId: "my-ad-analytics-4560a", storageBucket: "my-ad-analytics-4560a.firebasestorage.app", messagingSenderId: "104213283950", appId: "1:104213283950:web:b5a25ecd54df809625127f", measurementId: "G-WS7QSQ9H0Y" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const deviceId = localStorage.getItem('deviceId') || 'device-' + Date.now();
        localStorage.setItem('deviceId', deviceId);

        const CONFIG = { INITIAL_LOAD: 5, BATCH_SIZE: 20, CONTACT_EMAIL: "contact@secretbinodon.com", footer: { about: "#", contact: "#", privacy: "#", terms: "#" } };

        document.getElementById('link-about').href = CONFIG.footer.about;
        document.getElementById('link-contact').href = CONFIG.footer.contact;
        document.getElementById('link-privacy').href = CONFIG.footer.privacy;
        document.getElementById('link-terms').href = CONFIG.footer.terms;

        let allPosts = []; let currentIndex = 0; let observer; let timeElementsToUpdate = [];

        function formatCount(num) { if (!num) return 0; return num >= 1000000 ? (num/1000000).toFixed(1)+'M' : num >= 1000 ? (num/1000).toFixed(1)+'K' : num; }
        function timeAgo(dateString) { const s = Math.floor((new Date() - new Date(dateString)) / 1000); let i = s / 31536000; if (i > 1) return Math.floor(i) + "y ago"; i = s / 86400; if (i > 1) return Math.floor(i) + "d ago"; i = s / 3600; if (i > 1) return Math.floor(i) + "h ago"; i = s / 60; if (i > 1) return Math.floor(i) + "m ago"; return "Just now"; }
        function updateAllTimeElements() { timeElementsToUpdate.forEach(item => { if (item.element && item.element.parentNode) { item.element.innerText = timeAgo(item.dateString); } else { timeElementsToUpdate = timeElementsToUpdate.filter(i => i !== item); } }); }
        function formatDate(d) { return new Date(d).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }); }
        function showNotification(msg) { const n = document.getElementById('notification'); n.textContent = msg; n.classList.add('show'); setTimeout(() => n.classList.remove('show'), 3000); }
        window.sendEmail = function() { window.location.href = `mailto:${CONFIG.CONTACT_EMAIL}`; }
        window.shareProfile = function() { const url = window.location.href.split('?')[0]; const title = "Filmixo"; const text = "Filmixo:üçø - new popular, trending, premium, and blockbuster, movie download website üé•visit now"; if (navigator.share) { navigator.share({ title: title, text: text, url: url }).catch((error) => console.log('Share failed', error)); } else { navigator.clipboard.writeText(`${text} ${url}`); showNotification("Website link copied! üìã"); } }
        window.sharePost = function(id, title) { const url = window.location.origin + `/movie/post.html?id=${id}`; if (navigator.share) { navigator.share({ title: title, text: title, url: url }).catch((e) => console.log('Share failed', e)); } else { navigator.clipboard.writeText(url); showNotification("Link copied! üìã"); } }
        let sliderInterval;const startCoverSlider=p=>{const c=document.getElementById("cover-slider"),i=c.querySelector(".intro-text"),s=p.slice(0,10);if(!s.length)return;const clear=()=>{clearInterval(sliderInterval);c.querySelectorAll(".cover-photo-inner").forEach(e=>e.remove())};const intro=()=>{i.style.animation="none";i.offsetHeight;i.style.animation="cinematicIntro 3s cubic-bezier(.22,1,.36,1) forwards"};const slide=()=>{const w=document.createElement("div");w.className="cover-photo-inner";w.style.cssText="position:absolute;inset:0;display:flex;will-change:transform,opacity;transition:opacity 2.2s ease-in-out,transform 1s cubic-bezier(.22,1,.36,1);opacity:0";w.innerHTML=s.map(x=>`<img src="${x.mediaImage}" loading="lazy" style="width:100%;height:100%;object-fit:cover;flex:0 0 100%">`).join("");c.appendChild(w);requestAnimationFrame(()=>w.style.opacity=1);let n=0;sliderInterval=setInterval(()=>{n++;n<s.length?w.style.transform=`translate3d(-${n*100}%,0,0)`:(clear(),setTimeout(run,100))},3400)};const run=()=>{clear();intro();setTimeout(slide,2200)};run();document.addEventListener("visibilitychange",()=>document.hidden?clear():run())}  
        
               function adjustImageAspectRatio(imgElement) {
               const mediaContainer = imgElement.closest('.media-container');
                imgElement.onload = function() {
                const ratio = this.naturalWidth / this.naturalHeight;
                if (ratio >= (3 / 4)) { mediaContainer.classList.add('auto-fit'); } else { mediaContainer.classList.remove('auto-fit'); }
            };
            if (imgElement.complete) { imgElement.onload(); }
        }

        async function loadNextBatch(size = CONFIG.BATCH_SIZE) {
            const container = document.getElementById('feed-container');
            const sentinel = document.getElementById('sentinel');
            if (currentIndex >= allPosts.length) { sentinel.style.display = 'none'; return; }
            if (size === CONFIG.BATCH_SIZE) { sentinel.classList.add('loading'); }

            const batch = allPosts.slice(currentIndex, currentIndex + size);
            batch.forEach(post => {
                let excerpt = post.paragraphs && post.paragraphs.length > 0 ? post.paragraphs[0].substring(0, 100) + "..." : "No description available.";
                const safeTitle = post.title.replace(/'/g, "\\'");
                const cardWrapper = document.createElement('div');
                cardWrapper.innerHTML = `<div class="post-card" data-id="${post.id}"><div class="post-header"><div class="post-pfp"><img src="${PERMANENT_PROFILE_IMAGE_URL}" loading="lazy"></div><div class="post-meta-text"><div class="name-row"><h3>FILMIXO<i class="verified-badge fa-solid fa-circle-check"></i></h3><span class="post-username">@filmixo</span> <span class="dot-separator">¬∑</span><span class="time-ago" data-upload-time="${post.uploadTime}">${timeAgo(post.uploadTime)}</span></div></div></div><div class="post-title" onclick="openPost('${post.id}')">${post.title}</div><div class="post-excerpt" onclick="openPost('${post.id}')">${excerpt} <span class="read-more-text">See more</span></div><div class="hashtags">${post.hashtags}</div><div class="media-container" onclick="openPost('${post.id}')"><img src="${post.mediaImage}" loading="lazy" data-post-id="${post.id}"><div class="play-icon"></div><div class="duration-badge">${post.videoDuration}</div></div><div class="post-footer"><div class="footer-left"><i class="fa-solid fa-chart-simple"></i> <span class="count-text view-count">0</span> <span class="label-text">Views</span></div><div class="footer-right"><div class="love-btn"><i class="fa-regular fa-heart"></i> <span class="count-text like-count">0</span> <span class="label-text">Likes</span></div><div class="post-date-display">${formatDate(post.uploadTime)}</div><div class="footer-share-btn" onclick="sharePost('${post.id}', '${safeTitle}')"><i class="fa-solid fa-share-from-square"></i></div></div></div></div>`;
                
                const newCard = cardWrapper.firstElementChild;
                container.appendChild(newCard);
                const imgElement = newCard.querySelector('.media-container img');
                adjustImageAspectRatio(imgElement);
                const timeElement = newCard.querySelector('.time-ago');
                if (timeElement) { timeElementsToUpdate.push({ element: timeElement, dateString: post.uploadTime }); }
                initializeFirebaseForCard(newCard, post.id);
            });
            currentIndex += size;
            if (size === CONFIG.BATCH_SIZE) { sentinel.classList.remove('loading'); }
        }

        function setupObserver() {
            const sentinel = document.getElementById('sentinel');
            observer = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) { loadNextBatch(CONFIG.BATCH_SIZE); }
               }, { rootMargin: '500px' });
            observer.observe(sentinel);
        }
        
        function initializeFirebaseForCard(card, id) {
            const viewEl = card.querySelector('.view-count');
            const likeEl = card.querySelector('.like-count');
            const loveBtn = card.querySelector('.love-btn');
            onSnapshot(doc(db, "views", id), (s) => viewEl.innerText = formatCount(s.data()?.count || 0));
            const loveRef = doc(db, "loves", id);
            const userRef = doc(db, `loves/${id}/users`, deviceId);
            getDoc(userRef).then(s => { if(s.exists()) { loveBtn.classList.add('liked'); loveBtn.querySelector('i').classList.replace('fa-regular', 'fa-solid'); } });
            onSnapshot(loveRef, (s) => likeEl.innerText = formatCount(s.data()?.count || 0));
            loveBtn.addEventListener('click', async () => {
                const s = await getDoc(userRef);
                if(s.exists()) { } else { loveBtn.classList.add('liked'); loveBtn.querySelector('i').classList.replace('fa-regular', 'fa-solid'); await setDoc(loveRef, { count: increment(1) }, { merge: true }); await setDoc(userRef, { time: new Date() }); }
            });
        }

        async function calculateTotalViews() {
            const totalViewsEl = document.getElementById('total-views-count');
            totalViewsEl.innerText = '0'; 
            const snap = await getDocs(collection(db, "views"));
            let total = 0;
            snap.forEach((doc) => { total += doc.data().count || 0; });
            totalViewsEl.innerText = formatCount(total);
        }
        
        window.openPost = (id) => { sessionStorage.setItem('index_scroll', window.scrollY); window.location.href = `/movie/post.html?id=${id}`; }; 
        
        function deactivateNavButtons() { document.querySelectorAll('.nav-btn').forEach(b => { b.classList.remove('active'); b.classList.add('inactive'); }); }

        window.showFeed = () => {
            document.getElementById('feed-container').style.display='block';
            document.getElementById('sentinel').style.display='flex';
            document.getElementById('login-view').style.display='none';
            document.getElementById('main-footer').style.display='block';
            deactivateNavButtons();
            document.getElementById('nav-home').classList.add('active');
            document.getElementById('nav-home').classList.remove('inactive');
        };
        window.goToSignUp = () => window.location.href="https://prototypesorting.com/dkhpkccgup?key=f93978b429dfbcf244b3718ef67223ef";
        window.showLogin = () => {
            document.getElementById('feed-container').style.display='none';
            document.getElementById('sentinel').style.display='none';
            document.getElementById('login-view').style.display='block';
            document.getElementById('main-footer').style.display='none';
            deactivateNavButtons();
            document.getElementById('nav-login').classList.add('active');
            document.getElementById('nav-login').classList.remove('inactive');
        };

        const searchOverlay = document.getElementById('search-overlay');
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        const notFound = document.getElementById('not-found');

            window.showSearch = () => {
            searchOverlay.style.display = 'flex';
            deactivateNavButtons();
            document.getElementById('nav-search').classList.add('active');
            document.getElementById('nav-search').classList.remove('inactive');
            searchInput.focus(); renderSearchResults(''); 
            document.body.style.overflow = 'hidden'; 
            history.pushState({ action: 'search_open' }, ''); // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï
        };

        window.hideSearch = () => {
            searchOverlay.style.display = 'none';
            document.body.style.overflow = ''; searchInput.value = '';
            showFeed(); 
        };

        window.addEventListener('popstate', () => { 
            if (searchOverlay.style.display === 'flex') { hideSearch(); } 
        });
        
         let searchIdx = 0; let searchFiltered = [];
        function renderSearchResults(q) {
            searchResults.innerHTML = ''; searchIdx = 0; const query = q.toLowerCase().trim();
            if (!query) { searchResults.innerHTML = `<div style="text-align:center; color:#536471; margin-top:50px;">Start typing to search...</div>`; notFound.style.display = 'none'; return; }
            
                searchFiltered = allPosts.filter(p => 
                p.title.toLowerCase().includes(query) || 
                (p.hashtags && p.hashtags.toLowerCase().includes(query))
            ).sort((a, b) => {
                const titleA = a.title.toLowerCase();
                const titleB = b.title.toLowerCase();
                
                // ‡ßß. ‡¶Ø‡¶¶‡¶ø ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡¶æ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶¶‡¶ø‡ßü‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßü, ‡¶§‡¶¨‡ßá ‡¶§‡¶æ‡¶ï‡ßá ‡¶Ö‡¶ó‡ßç‡¶∞‡¶æ‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®
                const startsWithA = titleA.startsWith(query);
                const startsWithB = titleB.startsWith(query);
                
                if (startsWithA && !startsWithB) return -1;
                if (!startsWithA && startsWithB) return 1;
                
                // ‡ß®. ‡¶Ø‡¶¶‡¶ø ‡¶¶‡ßÅ‡¶ü‡¶ø‡¶á ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßü ‡¶¨‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶®‡¶æ ‡¶π‡ßü, ‡¶§‡¶¨‡ßá ‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®
                return titleA.localeCompare(titleB);
            });
            
                if (searchFiltered.length === 0) { 
                searchResults.innerHTML = ''; 
                notFound.innerHTML = '<i class="fa-solid fa-video-slash" style="display:block; font-size:30px; margin-bottom:10px; color:#9fa6ad;"></i> Movie Not Found'; 
                notFound.style.display = 'block'; 
                searchResults.appendChild(notFound); 
                return; 
            }
            notFound.style.display = 'none'; 
            loadMoreSearch();
        }

        function loadMoreSearch() {
            const batch = searchFiltered.slice(searchIdx, searchIdx + 10);
            batch.forEach(post => {
                const item = document.createElement('div');
                item.className = 'search-result-item';
                item.onclick = () => { openPost(post.id); hideSearch(); };
                let exc = post.paragraphs?.[0]?.substring(0, 70) + "..." || "";
                item.innerHTML = `<img src="${post.mediaImage}" class="result-img"><div><div class="result-title">${post.title}</div><div class="result-excerpt">${exc}</div></div>`;
                searchResults.appendChild(item);
            });
            searchIdx += 10;
        }

        searchResults.addEventListener('scroll', () => {
            if (searchResults.scrollTop + searchResults.clientHeight >= searchResults.scrollHeight - 50) {
                if (searchIdx < searchFiltered.length) { loadMoreSearch(); }
            }
        });
        
        searchInput.addEventListener('input', () => { renderSearchResults(searchInput.value.trim()); });

            async function loadFeed() {
            try {
                const res = await fetch('posts.json');
                const posts = await res.json();
                allPosts = posts.sort((a, b) => new Date(b.uploadTime).getTime() - new Date(a.uploadTime).getTime()); startCoverSlider(allPosts);
                document.getElementById('total-videos-count').innerText = formatCount(allPosts.length); 
                calculateTotalViews(); 

                const savedPos = sessionStorage.getItem('index_scroll');
                let batchSize = (savedPos && parseInt(savedPos) > 1200) ? 15 : CONFIG.INITIAL_LOAD;

                await loadNextBatch(batchSize); 
                setupObserver();
                document.getElementById('main-footer').style.display = 'block';

                if (savedPos) {
                    setTimeout(() => {
                        window.scrollTo({ top: parseInt(savedPos), behavior: 'instant' });
                        setTimeout(() => {
                            window.scrollTo({ top: parseInt(savedPos), behavior: 'instant' });
                            sessionStorage.removeItem('index_scroll');
                        }, 150);
                    }, 350); 
                }
                setInterval(updateAllTimeElements, 60000); 
            } catch (error) {
                console.error(error);
            }
        }

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            document.getElementById('loginBtn').innerText='Logging in...';
            setTimeout(() => { document.getElementById('loginBtn').style.display='none'; document.getElementById('successMsg').style.display='block'; }, 2000);
        });
        
        searchResults.innerHTML = notFound.outerHTML;
        notFound.style.display = 'none';
        loadFeed();
    </script>
</body>
</html>
