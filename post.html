<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filmixo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; text-decoration: none; }
        body { background: #fff; display: flex; justify-content: center; }

        /* ‚úÖ ‡¶Æ‡ßÇ‡¶≤ ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü ‡¶®‡¶ø‡¶Ø‡¶º‡¶®‡ßç‡¶§‡ßç‡¶∞‡¶£: ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡¶ì‡ßü‡¶æ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø */
        .main-wrapper { 
            width: 100%; 
            max-width: 600px; 
            min-height: 10vh; 
            background: #fff; 
            position: relative; 
            border-left: 1px solid #eee; 
            border-right: 1px solid #eee; 
            padding-bottom: 0; 
            opacity: 0; 
        }
        
        /* ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶§‡¶æ‡ßé‡¶ï‡ßç‡¶∑‡¶£‡¶ø‡¶ï ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®‡¶§‡¶æ */
        .main-wrapper.loaded { opacity: 1 !important; }

        /* ‡¶π‡ßá‡¶°‡¶æ‡¶∞ */
        header { 
            background: #1da1f2; padding: 12px 15px; display: flex; justify-content: space-between; 
            align-items: center; color: white; position: sticky; top: 0; z-index: 100; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); opacity: 1 !important; 
        }
        .logo-area { font-weight: 800; font-size: 20px; text-transform: uppercase; }
        .header-btn { background: white; color: #1da1f2; padding: 6px 15px; border-radius: 20px; font-weight: bold; font-size: 14px; margin-left: 10px; cursor: pointer; }

        /* ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶è‡¶∞‡¶ø‡ßü‡¶æ (‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶™‡ßã‡¶∏‡ßç‡¶ü) */
        .post-author-area { padding: 10px 15px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #e1e8ed; }
        .author-info { display: flex; align-items: center; gap: 10px; }
        .pfp { width: 45px; height: 45px; border-radius: 50%; overflow: hidden; background: #ddd; }
        .pfp img { width: 100%; height: 100%; object-fit: cover; }
        
        /* üî• ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ CSS: ‡¶®‡¶æ‡¶Æ ‡¶è‡¶ï ‡¶≤‡¶æ‡¶á‡¶®‡ßá, ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶®‡¶ø‡¶ö‡ßá (‡¶®‡ßÄ‡¶≤) - ‡¶è‡¶ü‡¶ø ‡¶†‡¶ø‡¶ï ‡¶Ü‡¶õ‡ßá */
        .author-text { 
            /* ‡¶è‡¶ü‡¶ø ‡¶´‡ßç‡¶≤‡ßá‡¶ï‡ßç‡¶∏ ‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
        } 
        
        .author-text h3 { 
            font-size: 16px; 
            margin: 0; 
            color: #0f1419; 
            display: inline-flex;
            align-items: center;
        }
        .author-text span { 
            font-size: 14px; 
            color: #1da1f2; /* ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶®‡ßÄ‡¶≤ ‡¶∞‡¶ô */
            display: block; /* ‡¶Ø‡¶æ‡¶§‡ßá ‡¶è‡¶ü‡¶ø h3-‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶ö‡¶≤‡ßá ‡¶Ø‡¶æ‡ßü */
            margin-top: -2px; 
        }
        .post-time { font-size: 13px; color: #536471; font-weight: bold; }

        /* ‡¶Æ‡ßÇ‡¶≤ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) */
        .video-container { width: 100%; aspect-ratio: 16/9; background: #000; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-top: 5px; cursor: pointer; }
        .video-container img { width: 100%; height: 100%; object-fit: contain; }
        .play-btn-center { position: absolute; width: 60px; height: 60px; background: rgba(0,0,0,0.6); border-radius: 50%; border: 3px solid #fff; display: flex; align-items: center; justify-content: center; z-index: 5; pointer-events: none; }
        .play-btn-center::after { content: ''; border-left: 20px solid white; border-top: 12px solid transparent; border-bottom: 12px solid transparent; margin-left: 5px; }
        .main-video-spinner { display: none; position: absolute; width: 50px; height: 50px; border: 5px solid rgba(255, 255, 255, 0.3); border-top: 5px solid #fff; border-radius: 50%; animation: spin 1s linear infinite; z-index: 6; }
        .video-controls { position: absolute; bottom: 0; left: 0; width: 100%; padding: 10px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; display: flex; justify-content: space-between; font-size: 12px; z-index: 5; }

        .content-body { padding: 15px 15px 0 15px; }
        .article-title { font-size: 20px; font-weight: 800; margin-bottom: 15px; color: #0f1419; line-height: 1.3; }
        .article-para { font-size: 15px; line-height: 1.2; color: #1c1e21; margin-bottom: 12px; text-align: left; letter-spacing: -0.3px; }

        /* ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶∏‡ßá‡¶ï‡¶∂‡¶® */
        .download-title-text { font-size: 18px; font-weight: 800; color: #0f1419; text-align: center; margin: 20px 0 10px 0; padding: 0 15px; border-top: 1px solid #e1e8ed; padding-top: 15px; }
        .download-buttons-container { padding: 0 15px; margin-bottom: 20px; display: flex; flex-direction: column; gap: 10px; }
        .download-btn-v2 { display: flex; align-items: center; justify-content: center; width: 100%; padding: 12px 10px; border-radius: 8px; font-weight: bold; font-size: 15px; text-align: center; color: white; cursor: pointer; text-transform: uppercase; box-shadow: 0 3px 6px rgba(0,0,0,0.15); transition: transform 0.2s, background-color 0.2s, opacity 0.3s; }
        .download-btn-v2:active { transform: scale(0.98); box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
        
        /* üî•üî• ‡¶á‡¶â‡¶®‡¶ø‡¶ï ‡¶Æ‡ßÅ‡¶≠‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® (FINAL ‡¶¨‡¶æ‡¶ü‡¶®) üî•üî• */
        .download-btn-v2.final-movie-btn {
            background: linear-gradient(135deg, #e0245e, #ff6b6b); /* ‡¶≤‡¶æ‡¶≤-‡¶ó‡ßã‡¶≤‡¶æ‡¶™‡ßÄ ‡¶ó‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü */
            padding: 15px 10px; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡¶°‡¶º ‡¶¨‡¶æ‡¶ü‡¶® */
            font-size: 17px;
            box-shadow: 0 5px 15px rgba(224, 36, 94, 0.4); /* ‡¶â‡¶ú‡ßç‡¶ú‡ßç‡¶¨‡¶≤ ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
            transform: scale(1.02); /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡¶°‡¶º ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá */
            animation: pulse 1.5s infinite; /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶™‡¶æ‡¶≤‡¶∏ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        }
        .download-btn-v2.final-movie-btn:hover {
            transform: scale(1.03);
            box-shadow: 0 7px 20px rgba(224, 36, 94, 0.6);
        }
        @keyframes pulse {
            0% { box-shadow: 0 5px 15px rgba(224, 36, 94, 0.4); }
            50% { box-shadow: 0 5px 20px rgba(224, 36, 94, 0.7); }
            100% { box-shadow: 0 5px 15px rgba(224, 36, 94, 0.4); }
        }

        /* ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶∏ ‡¶¨‡¶æ‡¶∞ (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) */
        .stats-section { padding: 12px 0; margin-top: 15px; border-top: 1px solid #e1e8ed; border-bottom: 1px solid #e1e8ed; display: flex; align-items: center; background: #fff; }
        .stats-left { display: flex; align-items: center; gap: 20px; flex-grow: 1; overflow: hidden; }
        .view-stat { flex: 0 0 auto; display: flex; align-items: center; gap: 5px; font-weight: 500; font-size: 15px; color: #536471; }
        .view-stat i { font-size: 16px; }
        .like-stat-container { flex: 1 1 auto; display: flex; justify-content: center; }
        .love-btn { display: flex; align-items: center; gap: 5px; font-weight: 500; font-size: 15px; color: #536471; cursor: pointer; padding: 5px 10px; border-radius: 20px; transition: 0.2s; user-select: none; }
        .love-btn:active { background-color: rgba(224, 36, 94, 0.1); transform: scale(0.95); }
        .love-btn.liked { color: #e0245e; } .love-btn.liked i { font-weight: 900; } .love-btn i { font-size: 18px; }
        .share-icons { flex: 0 0 auto; display: flex; gap: 8px; }
        .share-icon { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; cursor: pointer; font-size: 13px; transition: 0.2s; }
        .share-icon:hover { opacity: 0.8; transform: scale(1.1); }

        /* ‡¶∞‡¶ø‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶™‡ßã‡¶∏‡ßç‡¶ü (‡¶ï‡¶æ‡¶∞‡ßç‡¶°) */
        .related-section { background: #fff; margin-top: 0; }
        .related-header { padding: 15px; font-weight: 800; color: #536471; border-bottom: 1px solid #e1e8ed; text-transform: uppercase; background: #fff; }
        
        .post-card { 
            background: white; padding: 5px 15px 5px 15px; border-bottom: 1px solid #e1e8ed; 
            display: flex; flex-direction: column; 
            gap: 6px; 
        }

        .post-header { display: flex; gap: 10px; align-items: center; }
        .post-pfp { width: 45px; height: 45px; border-radius: 50%; overflow: hidden; background: #ddd; }
        .post-pfp img { width: 100%; height: 100%; object-fit: cover; }
        
        /* üî• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: post-meta-text ‡¶è‡¶ñ‡¶® ‡¶è‡¶ï‡¶ü‡¶ø ‡¶≤‡¶æ‡¶á‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá */
        .post-meta-text { 
            display: flex; 
            flex-direction: column; /* ‡¶Ø‡¶æ‡¶§‡ßá .name-row ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶´‡ßç‡¶≤‡ßá‡¶ï‡ßç‡¶∏-‡¶Æ‡ßÅ‡¶ï‡ßç‡¶§ ‡¶•‡¶æ‡¶ï‡ßá */
            justify-content: center; 
        }
        
        /* ‚úÖ ‡¶∞‡¶ø‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ-‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶è‡¶ï ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶Ü‡¶®‡¶§‡ßá ‡¶è‡¶ü‡¶ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶π‡¶æ‡¶∞‡ßç‡¶Ø */
        .name-row { 
            display: flex; /* üî• ‡¶è‡¶ü‡¶ø ‡¶∏‡¶¨ ‡¶â‡¶™‡¶æ‡¶¶‡¶æ‡¶® ‡¶è‡¶ï ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶Ü‡¶®‡¶¨‡ßá */
            align-items: center; 
            gap: 5px; 
            flex-wrap: wrap; 
        } 
        
        .name-row h3 { 
            font-size: 18px; 
            font-weight: 800; 
            color: #0f1419; 
            margin: 0; 
            /* ‚úÖ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã: ‡¶Æ‡ßá‡¶á‡¶® ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶ü‡¶ø‡¶ï ‡¶è‡¶ï ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
            display: inline-flex;
            align-items: center;
        }
        
        /* ‚úÖ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶®‡ßÄ‡¶≤ ‡¶π‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶è‡¶ñ‡¶® .name-row ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
        .post-username { 
            font-size: 14px; 
            color: #1da1f2; 
            margin-top: 0; /* ‡¶è‡¶ï ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶Ü‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶® ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã */
        }

        /* üî• ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶ü‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) */
        .verified-badge {
            color: #1da1f2; 
            font-size: 16px; 
            margin-left: 5px; 
            margin-right: 2px;
            display: inline-flex;
            align-items: center;
        }
        
        .time-ago { font-size: 15px; color: #536471; }
        .dot-separator { font-size: 15px; color: #536471; margin: 0 2px; }

        .clickable-area { cursor: pointer; }
        
        .post-title { 
            font-size: 18px; 
            font-weight: 700; 
            color: #0f1419; 
            margin-bottom: 8px; 
            margin-top: -3px; 
            line-height: 1.3; 
        }
        
        .post-excerpt { font-size: 15px; color: #0f1419; line-height: 1.4; margin-bottom: 8px; display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden; }
        .read-more-text { color: #1da1f2; font-weight: 600; font-size: 14px; }
        .hashtags { color: #1d9bf0; font-size: 15px; margin-bottom: 10px; cursor: default; }

        /* ‡¶∞‡¶ø‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶á‡¶Æ‡ßá‡¶ú ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) */
        .media-container { position: relative; width: 100%; border-radius: 12px; overflow: hidden; margin-top: 5px; display: block; cursor: pointer; background: #000; aspect-ratio: 3 / 4; max-height: 720px; }
        .media-container img { width: 100%; height: 100%; display: block; object-fit: cover; margin: 0 auto; max-height: none; }
        .media-container.auto-fit { aspect-ratio: initial; height: auto; }
        .media-container.auto-fit img { height: auto; object-fit: contain; }

        .play-icon { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 60px; height: 60px; background-color: rgba(0, 0, 0, 0.6); border-radius: 50%; display: flex; justify-content: center; align-items: center; pointer-events: none; border: 2px solid rgba(255,255,255,0.8); }
        .play-icon::after { content: ''; display: block; width: 0; height: 0; border-left: 18px solid white; border-top: 11px solid transparent; border-bottom: 11px solid transparent; margin-left: 4px; }
        .duration-badge { position: absolute; bottom: 8px; right: 8px; background-color: rgba(0, 0, 0, 0.8); color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; pointer-events: none; z-index: 5; }

        .post-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 12px; color: #536471; font-size: 16px; font-weight: 500; }
        .footer-left { display: flex; align-items: center; gap: 6px; }
        .footer-right { display: flex; align-items: center; gap: 20px; }
        
        .love-btn-rel { cursor: pointer; display: flex; align-items: center; gap: 5px; transition: all 0.2s; user-select: none; }
        .love-btn-rel:hover { color: #e0245e; background-color: rgba(224, 36, 94, 0.1); padding: 4px 8px; border-radius: 15px; margin: -4px -8px; }
        .love-btn-rel.liked { color: #e0245e !important; } .love-btn-rel.liked i { font-weight: 900; }
        .footer-share-btn { cursor: pointer; padding: 8px; border-radius: 50%; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; }
        .footer-share-btn:hover { background-color: rgba(0,0,0,0.05); }

        /* ‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßã‡¶°‡¶æ‡¶∞ (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) */
        .site-footer { background-color: #fff; padding: 30px 20px; text-align: center; border-top: none; margin-top: 0; }
        .footer-links { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 15px; }
        .footer-links a { color: #536471; font-size: 14px; font-weight: 500; transition: color 0.2s; }
        .footer-links a:hover { color: #1da1f2; text-decoration: underline; }
        .footer-copyright { color: #536471; font-size: 13px; }
        .footer-copyright a { color: #1da1f2; font-weight: bold; }
        
        .spinner { width: 14px; height: 14px; border: 2px solid #ccc; border-top: 2px solid #000; border-radius: 50%; animation: spin 1s linear infinite; display: inline-block; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .notification { position: fixed; top: 70px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.85); color: white; padding: 10px 20px; border-radius: 30px; z-index: 1002; opacity: 0; transition: 0.3s; pointer-events: none; }
        .notification.show { opacity: 1; }

        /* Infinite Scroll Sentinel */
        #sentinel { width: 100%; height: 50px; display: flex; align-items: center; justify-content: center; }
        .load-more-spinner { width: 24px; height: 24px; border: 3px solid #ccc; border-top: 3px solid #1da1f2; border-radius: 50%; animation: spin 1s linear infinite; display: none; }
        #sentinel.loading .load-more-spinner { display: block; }
    </style>
</head>
<body>

<div class="main-wrapper">
    <header>
        <div class="logo-area">FILMIXO</div>
        <div>
            <span class="header-btn" onclick="window.location.href='https://prototypesorting.com/p99vwjq2?key=57217116cccb25526dfb6a5a4edd9aea'">Sign Up</span>
            <span class="header-btn" onclick="window.location.href='index.html'">Home</span>
        </div>
    </header>

    <div id="post-details-container">
        </div>

    <div class="related-section" id="related-section-id">
        <div class="related-header">RELATED POSTS</div>
        <div id="related-posts-container"></div>
        <div id="sentinel"><div class="load-more-spinner"></div></div>
    </div>

    <footer class="site-footer">
        <div class="footer-links">
            <a href="#" id="link-about">About</a>
            <a href="#" id="link-contact">Contact</a>
            <a href="#" id="link-privacy">Privacy Policy</a>
            <a href="#" id="link-terms">Terms of Service</a>
        </div>
        <div class="footer-copyright">
            Copyright ¬© 2026 <a href="index.html">Filmixo.com</a>. All rights reserved.
        </div>
    </footer>
    <div id="notification" class="notification"></div>
</div>

<script type="module">
    // Firebase SDK Imports (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc, increment, onSnapshot } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";

    // ============================================
    //  ‡ßß. ‡¶∏‡ßç‡¶•‡¶æ‡ßü‡ßÄ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶á‡¶Æ‡ßá‡¶ú URL ‡¶è‡¶¨‡¶Ç Firebase Configuration (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)
    // ============================================
    const PERMANENT_PROFILE_IMAGE_URL = "https://raw.githubusercontent.com/Filmixo/movie/refs/heads/main/Image Files/FILMIXO.jpg";

    const firebaseConfig = { apiKey: "AIzaSyCAsD8wucLsudzY5oNbiixLGyjN2apdV0Q", authDomain: "my-ad-analytics-4560a.firebaseapp.com", databaseURL: "https://my-ad-analytics-4560a-default-rtdb.firebaseio.com", projectId: "my-ad-analytics-4560a", storageBucket: "my-ad-analytics-4560a.firebasestorage.app", messagingSenderId: "104213283950", appId: "1:104213283950:web:b5a25ecd54df809625127f", measurementId: "G-WS7QSQ9H0Y" };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const deviceId = localStorage.getItem('deviceId') || 'device-'+Date.now(); 

    // ============================================
    //  CONFIGURATION (‡¶∞‡¶ø‡¶≤‡ßá‡¶ü‡ßá‡¶° ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤)
    // ============================================
    const CONFIG = {
        GLOBAL_VIDEO_LINK: "https://prototypesorting.com/p99vwjq2?key=57217116cccb25526dfb6a5a4edd9aea",
        TOTAL_RELATED_POSTS: 6, 
        BATCH_SIZE_SCROLL: 6,  
        footer: { about: "#", contact: "#", privacy: "#", terms: "#" }
    };

    document.getElementById('link-about').href = CONFIG.footer.about;
    document.getElementById('link-contact').href = CONFIG.footer.contact;
    document.getElementById('link-privacy').href = CONFIG.footer.privacy;
    document.getElementById('link-terms').href = CONFIG.footer.terms;

    // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
    let availablePosts = []; 
    let currentStartIndex = 0; 
    let observer; 
    let sentinelObserver; 
    let timeElementsToUpdate = [];

    
    // --- ‡¶á‡¶â‡¶ü‡¶ø‡¶≤‡¶ø‡¶ü‡¶ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶∏ (‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) ---
    function getRandomColor() { const c=['#1da1f2','#e0245e','#17bf63']; return c[Math.floor(Math.random()*c.length)]; } 
    function formatCount(n) { if(!n) return 0; return n >= 1000000 ? (n/1000000).toFixed(1)+'M' : n >= 1000 ? (n/1000).toFixed(1)+'K' : n; }
    
    function timeAgo(dateString) { 
        const d = new Date(dateString);
        const seconds = Math.floor((new Date() - d) / 1000);
        
        let interval = seconds / 31536000;
        if (interval > 1) return Math.floor(interval) + "y ago";
        
        interval = seconds / 86400;
        if (interval > 1) return Math.floor(interval) + "d ago";
        
        interval = seconds / 3600;
        if (interval > 1) return Math.floor(interval) + "h ago";
        
        interval = seconds / 60;
        if (interval > 1) return Math.floor(interval) + "m ago";
        
        return "Just now";
    }

    function updateAllTimeElements() {
        timeElementsToUpdate.forEach(item => {
            if (item.element && item.element.parentNode) {
                item.element.innerText = timeAgo(item.dateString);
            } else {
                timeElementsToUpdate = timeElementsToUpdate.filter(i => i !== item);
            }
        });
    }

    function formatDate(d) { return new Date(d).toLocaleDateString('en-US', { year:'numeric', month:'short', day:'numeric' }); }
    function showNotification(msg) { const n=document.getElementById('notification'); n.innerText=msg; n.classList.add('show'); setTimeout(()=>n.classList.remove('show'),3000); }

    const urlParams = new URLSearchParams(window.location.search);
    const postId = urlParams.get('id');

    function adjustImageAspectRatio(imgElement) {
        const mediaContainer = imgElement.closest('.media-container');
        
        imgElement.onload = function() {
            const originalWidth = this.naturalWidth;
            const originalHeight = this.naturalHeight;
            
            const ratio = originalWidth / originalHeight;
            
            if (ratio >= (3 / 4)) { 
                mediaContainer.classList.add('auto-fit');
            } else {
                mediaContainer.classList.remove('auto-fit');
            }
        };

        if (imgElement.complete) {
            imgElement.onload();
        }
    }
    
    // ==================================================
    //  üî•üî•üî• ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶ì ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® üî•üî•üî•
    // ==================================================
    
    // üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶®‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü: ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ JSON ‡¶´‡¶æ‡¶á‡¶≤ ‡¶•‡ßá‡¶ï‡ßá link1/link2 ‡¶è‡¶≤‡ßá‡¶á ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá)
    // ‡¶è‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ñ‡¶® ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ downloadLink1/downloadLink2 ‡¶π‡¶ø‡¶∏‡ßá‡¶¨‡ßá‡¶á ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá‡•§
    const LAST_CLICK_TIME_KEY = 'last_click_time_' + deviceId; // ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç
    const LAST_CLICKED_AD_TYPE_KEY = 'last_clicked_ad_type_' + postId;
    const MIN_VISIT_TIME_MS = 5000; // 5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶•‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶∂‡¶∞‡ßç‡¶§

    // ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø + ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ü‡¶æ‡¶á‡¶™ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶ï‡¶ø 
    const getVisitedKey = (type) => `${type}_visited_${postId}`;
    
    const FINAL_BUTTON_VISIBLE_KEY = 'final_btn_visible_' + postId;

    // ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßá‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßá
    function countRequiredVisits(post) {
        let required = 0;
        if (post.downloadLink2 && post.downloadLink2.startsWith('http')) required++; // 1080p
        if (post.downloadLink1 && post.downloadLink1.startsWith('http')) required++; // 720p
        return required;
    }
    
    // ==================================================
    //  ‚úÖ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    // ==================================================

    function renderMainPost(post) {
        
        // ‡ßß. ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ
        let content = `
            <h1 class="article-title">${post.title}</h1>
        `;
        
        post.paragraphs.forEach((p, i) => {
            content += `<p class="article-para">${p}</p>`;
        });

        // ‚úÖ ‡ß®. ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶∏‡ßá‡¶ï‡¶∂‡¶® (‡¶∂‡¶∞‡ßç‡¶§‡¶π‡ßÄ‡¶®‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´‡ßá‡¶∞ ‡¶™‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá)
        let downloadSectionHTML = '';
        
        const isAd1Available = post.downloadLink2 && post.downloadLink2.startsWith('http');
        const isAd2Available = post.downloadLink1 && post.downloadLink1.startsWith('http');

        if (isAd1Available || isAd2Available || post.downloadLink3) {
            downloadSectionHTML += `
                <div class="download-title-text">
                    DOWNLOAD FULL MOVIE IN HD
                </div>
                <div class="download-buttons-container">
                    
                    ${isAd1Available ? `
                        <a href="#" 
                           data-ad-link="${post.downloadLink2}" 
                           id="btn-1080" 
                           class="download-btn-v2" 
                           style="background:#1da1f2;"
                           data-button-type="ad1080">
                            <i class="fa-solid fa-cloud-arrow-down" style="margin-right: 5px;"></i> 1080p Full HD (Visit Ad)
                        </a>
                    ` : ''}
                    
                    ${isAd2Available ? `
                        <a href="#" 
                           data-ad-link="${post.downloadLink1}" 
                           id="btn-720" 
                           class="download-btn-v2" 
                           style="background:#e0245e;"
                           data-button-type="ad720">
                            <i class="fa-solid fa-cloud-arrow-down" style="margin-right: 5px;"></i> 720p HD (Visit Ad)
                        </a>
                    ` : ''}

                    ${post.downloadLink3 ? `
                        <a href="#" 
                           data-final-url="${post.downloadLink3}" 
                           id="btn-480" 
                           class="download-btn-v2 final-movie-btn" 
                           style="display: none;" 
                           data-button-type="final">
                            <i class="fa-solid fa-download" style="margin-right: 5px;"></i> DOWNLOAD FULL MOVIE
                        </a>
                    ` : '' : ''}
                </div>
            `;
        }
        
        // ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶¨‡¶°‡¶ø ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
        document.getElementById('post-details-container').innerHTML = `
            <div class="post-author-area">
                <div class="author-info">
                    <div class="pfp"><img src="${PERMANENT_PROFILE_IMAGE_URL}" loading="lazy"></div>
                    <div class="author-text">
                        <h3>FILMIXO <i class="verified-badge fa-solid fa-circle-check"></i></h3> 
                        <span>@filmixo</span>
                    </div>
                </div>
                <div class="post-time" id="main-post-time">${timeAgo(post.uploadTime)}</div>
            </div>
            <div class="video-container" onclick="handleVideoClick()"><img src="${post.mediaImage}" loading="lazy"><div class="play-btn-center" id="main-play-btn"></div><div class="main-video-spinner" id="main-spinner"></div><div class="video-controls"><span>${post.videoDuration}</span><span><i class="fa-solid fa-volume-high"></i> HD</span></div></div>
            <div class="content-body">
                ${content}
                ${downloadSectionHTML} 
                <div class="stats-section">
                    <div class="stats-left">
                        <div class="view-stat"><i class="fa-solid fa-chart-simple"></i> <span id="view-cnt">...</span> Views</div>
                        <div class="like-stat-container"><div class="love-btn"><i class="fa-regular fa-heart"></i> <span id="like-cnt">...</span> Likes</div></div>
                    </div>
                    <div class="share-icons">
                        <div class="share-icon" style="background:#1877f2" onclick="share('fb', '${post.title}')"><i class="fa-brands fa-facebook-f"></i></div>
                        <div class="share-icon" style="background:#0084ff" onclick="share('msg', '${post.title}')"><i class="fa-brands fa-facebook-messenger"></i></div>
                        <div class="share-icon" style="background:#25d366" onclick="share('wa', '${post.title}')"><i class="fa-brands fa-whatsapp"></i></div>
                        <div class="share-icon" style="background:#1da1f2" onclick="share('tw', '${post.title}')"><i class="fa-brands fa-twitter"></i></div>
                        <div class="share-icon" style="background:#0088cc" onclick="share('tg', '${post.title}')"><i class="fa-brands fa-telegram"></i></div>
                    </div>
                </div>
            </div>`;
        
        // ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶è‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ
        const mainTimeElement = document.getElementById('main-post-time');
        if (mainTimeElement) {
            timeElementsToUpdate.push({
                element: mainTimeElement,
                dateString: post.uploadTime
            });
        }
        
        // ‚úÖ ‡¶®‡¶§‡ßÅ‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
        if (post.downloadLink3) {
            setupDownloadClickLogic(post);
        }
    }

    // ==================================================
    //  üî•üî•üî• ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶≤‡¶ú‡¶ø‡¶ï üî•üî•üî•
    // ==================================================
    
    function setupDownloadClickLogic(post) {
        
        const totalRequiredVisits = countRequiredVisits(post);
        
        // üî• ‡ßß. pageshow ‡¶≤‡¶ú‡¶ø‡¶ï: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶™‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡¶æ‡¶∞ ‡¶™‡¶∞ 5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶∂‡¶∞‡ßç‡¶§ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á
        window.addEventListener('pageshow', function(event) {
            
            // üî• ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£: ‡¶Ø‡¶¶‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ö‡ßá‡¶™‡ßá ‡¶´‡ßá‡¶∞‡¶æ ‡¶π‡ßü (bfcache ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º)
            if (event.persisted) { 
                const lastClickTime = parseInt(localStorage.getItem(LAST_CLICK_TIME_KEY) || '0', 10);
                const timeSpent = Date.now() - lastClickTime;
                const lastClickedAd = localStorage.getItem(LAST_CLICKED_AD_TYPE_KEY);

                if (lastClickTime > 0 && lastClickedAd && timeSpent >= MIN_VISIT_TIME_MS) {
                    // ‡¶∏‡¶´‡¶≤ ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü! 5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶∂‡¶∞‡ßç‡¶§ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§
                    console.log(`Back detected: SUCCESS. Spent ${timeSpent / 1000}s on ${lastClickedAd}.`);
                    
                    // ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡ßá‡¶∞ ‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ó ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                    localStorage.setItem(getVisitedKey(lastClickedAd), 'true');
                    
                } else if (lastClickTime > 0) {
                    // ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü: 5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶ï‡¶Æ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶õ‡¶ø‡¶≤‡•§
                    console.warn(`Back detected: FAIL. Spent ${timeSpent / 1000}s. Need ${MIN_VISIT_TIME_MS / 1000}s.`);
                }
                
                // ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶è‡¶¨‡¶Ç ‡¶∂‡ßá‡¶∑ ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶¶‡¶æ‡¶ì, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶π‡¶Ø‡¶º‡•§
                localStorage.removeItem(LAST_CLICK_TIME_KEY);
                localStorage.removeItem(LAST_CLICKED_AD_TYPE_KEY);
                
                // ‡¶¨‡¶æ‡¶ü‡¶®‡¶ó‡ßÅ‡¶≤‡¶ø‡¶∞ ‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
                updateButtonVisibilityAndStatus(post, totalRequiredVisits); 
            }
        }, { once: false }); 


        // üî• ‡ß®. ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶è‡¶¨‡¶Ç ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂‡ßá ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        updateButtonVisibilityAndStatus(post, totalRequiredVisits); 

        
        // üî• ‡ß©. ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ 
        document.querySelectorAll('.download-btn-v2').forEach(button => {
            
            button.addEventListener('click', function(e) {
                e.preventDefault();
                
                const buttonType = this.getAttribute('data-button-type'); 

                // --- ‡¶´‡¶æ‡¶á‡¶®‡¶æ‡¶≤ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï ---
                if (buttonType === 'final') {
                    if (localStorage.getItem(FINAL_BUTTON_VISIBLE_KEY) === 'true') {
                        const finalUrl = this.getAttribute('data-final-url');
                        console.log(`[FINAL] Redirecting to movie URL: ${finalUrl}`);
                        window.location.href = finalUrl;
                        
                        // ‚úÖ ‡¶∏‡¶´‡¶≤ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°: ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶°‡ßá‡¶ü‡¶æ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
                        localStorage.removeItem(getVisitedKey('ad1080'));
                        localStorage.removeItem(getVisitedKey('ad720'));
                        localStorage.removeItem(FINAL_BUTTON_VISIBLE_KEY);
                        localStorage.removeItem(LAST_CLICK_TIME_KEY);
                        localStorage.removeItem(LAST_CLICKED_AD_TYPE_KEY);
                        
                    } else {
                        // ‡¶Ø‡¶¶‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶¨‡¶æ‡¶ü‡¶® ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶π‡¶Ø‡¶º ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶´‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶ó ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá
                        alert(`Please visit ${totalRequiredVisits} ad link(s) for 5 seconds each to unlock the download.`);
                        updateButtonVisibilityAndStatus(post, totalRequiredVisits); 
                    }
                    return;
                }

                // --- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï (ad1080 ‡¶¨‡¶æ ad720) ---
                if (buttonType === 'ad1080' || buttonType === 'ad720') {
                    
                    // Already Visited ‡¶π‡¶≤‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ
                    if (localStorage.getItem(getVisitedKey(buttonType)) === 'true') return;

                    const adUrl = this.getAttribute('data-ad-link');
                    
                    // ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßã
                    localStorage.setItem(LAST_CLICK_TIME_KEY, Date.now());
                    localStorage.setItem(LAST_CLICKED_AD_TYPE_KEY, buttonType); 
                    
                    console.log(`[AD CLICK] Starting timer for ${buttonType}. Opening new tab.`);
                    
                    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶ï‡¶∞‡ßã 
                    window.open(adUrl, '_blank'); 

                    // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                    this.style.opacity = '0.5';
                    this.style.pointerEvents = 'none';
                }
            });
        });
    }

    /**
     * localStorage ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶®‡¶§‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßá
     */
    function updateButtonVisibilityAndStatus(post, totalRequiredVisits) {
        
        const ad1080Visited = localStorage.getItem(getVisitedKey('ad1080')) === 'true';
        const ad720Visited = localStorage.getItem(getVisitedKey('ad720')) === 'true';
        
        const currentVisitedCount = (ad1080Visited ? 1 : 0) + (ad720Visited ? 1 : 0);
        
        const btn1080 = document.querySelector('[data-button-type="ad1080"]');
        const btn720 = document.querySelector('[data-button-type="ad720"]');
        const btnFinal = document.querySelector('[data-button-type="final"]');
        
        // üî• ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: 1080p
        if (btn1080) {
            btn1080.innerText = ad1080Visited ? '1080p Full HD (VISITED ‚úÖ)' : '1080p Full HD (Visit Ad)';
            if(ad1080Visited) { 
                btn1080.style.backgroundColor = '#17bf63';
                btn1080.style.opacity = '0.5'; 
                btn1080.style.pointerEvents = 'none';
            } else {
                btn1080.style.backgroundColor = '#1da1f2';
                btn1080.style.opacity = '1'; 
                btn1080.style.pointerEvents = 'auto';
            }
        }
        
        // üî• ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü: 720p
        if (btn720) {
            btn720.innerText = ad720Visited ? '720p HD (VISITED ‚úÖ)' : '720p HD (Visit Ad)';
            if(ad720Visited) { 
                btn720.style.backgroundColor = '#17bf63';
                btn720.style.opacity = '0.5'; 
                btn720.style.pointerEvents = 'none';
            } else {
                btn720.style.backgroundColor = '#e0245e';
                btn720.style.opacity = '1'; 
                btn720.style.pointerEvents = 'auto';
            }
        }
        
        // üî• ‡¶´‡¶æ‡¶á‡¶®‡¶æ‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏: ‡¶Ø‡¶ñ‡¶® ‡¶ï‡ßç‡¶∞‡¶æ‡¶á‡¶ü‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶π‡¶¨‡ßá
        if (btnFinal) {
            if (currentVisitedCount >= totalRequiredVisits && totalRequiredVisits > 0) {
                btnFinal.style.display = 'flex'; // ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶ï‡¶∞‡ßã
                localStorage.setItem(FINAL_BUTTON_VISIBLE_KEY, 'true');
            } else {
                btnFinal.style.display = 'none'; // ‡¶Ö‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø ‡¶∞‡¶æ‡¶ñ‡ßã
                localStorage.removeItem(FINAL_BUTTON_VISIBLE_KEY);
            }
        }
    }
    
    // ... (‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)
    
    // ... (Firebase ‡¶è‡¶¨‡¶Ç Utility ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ó‡ßÅ‡¶≤‡¶ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)

    //... (init ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®)
    
    // ... (renderBatch ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)

    // ... (Firebase ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§)
    
    window.handleVideoClick = function() {
        const p = document.getElementById('main-play-btn'), s = document.getElementById('main-spinner');
        if(p) p.style.display = 'none'; if(s) s.style.display = 'block';
        setTimeout(() => { window.location.href = CONFIG.GLOBAL_VIDEO_LINK; }, 100); 
    }
    window.addEventListener('pageshow', () => {
        const p = document.getElementById('main-play-btn'), s = document.getElementById('main-spinner');
        if(p) p.style.display = 'flex'; if(s) s.style.display = 'none';
    });

    window.openPost = (id) => window.location.href = `/movie/post.html?id=${id}`;
    window.sharePost = (id, title) => { const url = window.location.origin + `/movie/post.html?id=${id}`; if (navigator.share) { navigator.share({ title: title, text: title, url: url }).catch((e) => console.log('Share failed', e)); } else { navigator.clipboard.writeText(url); showNotification("Link copied! üìã"); } }

    window.share = (platform, title) => {
        const url = encodeURIComponent(window.location.href);
        const text = encodeURIComponent(title);
        if (platform === 'msg') {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            if (isMobile) window.location.href = `fb-messenger://share/?link=${url}`;
            else window.open(`https://www.facebook.com/dialog/send?link=${url}&app_id=123456789&redirect_uri=${url}`, '_blank');
        } else {
            let link = '';
            if(platform === 'fb') link = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
            else if(platform === 'wa') link = `https://wa.me/?text=${text}%20${url}`;
            else if(platform === 'tw') link = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
            else if(platform === 'tg') link = `https://t.me/share/url?url=${url}&text=${text}`;
            window.open(link, '_blank');
        }
    }

    init();
</script>
</body>
</html>
